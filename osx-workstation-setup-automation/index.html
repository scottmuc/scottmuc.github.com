
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>OSX Workstation Setup Automation - More Muc Than You Can Handle</title>
  <meta name="author" content="Scott Muc">

  
  <meta name="description" content="DISCLAIMER Try out at your own risk. This setup is not meant to be copy+paste reusable. It&rsquo;s about keeping MY
workstation under source control &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://scottmuc.com/osx-workstation-setup-automation">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.scottmuc.com/scottmucblog" rel="alternate" title="More Muc Than You Can Handle" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  <link rel="openid2.provider" href="https://www.google.com/accounts/o8/ud">
  <link rel="openid2.local_id" href="https://profiles.google.com/scott.muc">


  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">More Muc Than You Can Handle</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.scottmuc.com/scottmucblog" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="https://twitter.com/scottmuc/">Twitter</a></li>
  <li><a href="https://github.com/scottmuc/">Github</a></li>
  <li><a href="http://scottmuclearnstodraw.tumblr.com/">Drawings</a></li>
  <li><a href="/about/">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">OSX Workstation Setup Automation</h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-01-11T14:45:48+00:00" pubdate data-updated="true">Jan 11<span>th</span>, 2017</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><span style="color: red;"><strong>DISCLAIMER Try out at your own risk. This setup is not meant to be copy+paste reusable. It&rsquo;s about keeping MY
workstation under source control, and this strategy may destroy the machine you wish to attempt this on.</strong></span></p>

<h2>Objective</h2>

<p>IT infrastructure has gone down a long journey of automating all of the things. We have automated deployments, production
environments, and regression testing. We can make an API request to Amazon and get a server instances in minutes. The
developer workstation is another story. Often, the developer workstation is a finely crafted machine. Just like
production, your workstation should be treated like a <a href="https://twitter.com/pcalcado/status/759218156493795329">hotel room</a> rather than an owned residence.</p>

<h2>My Setup</h2>

<p>Why bother with this for my personal machine? It serves as a good disaster recovery method. Using this automation for
the last several years (several laptops + multiple laptop repaves) has given me a lot of confidence that I know what
is required to get my machine ready.</p>

<p>There are plenty of <a href="#existing-tools">tools</a> that help with this process. What I am going to describe is yet another
approach, but I hope the simplicity of it will be attractive to those who have struggled trying to get other frameworks
to work.</p>

<p>To see what&rsquo;s included in this tooling take a look at the <a href="https://github.com/scottmuc/osx-homedir#so-whats-included">Inventory</a>. Essentially you get shell configuration, some OSX tweaks, and a bunch of software installed.</p>

<h2>There&rsquo;s No Place Like Home</h2>

<p><a href="https://github.com/scottmuc/osx-homedir/">My workstation automation</a> is cloned straight into <code>$HOME</code> on a fresh machine. This is a bit different than a lot of the other <a href="https://github.com/search?utf8=%E2%9C%93&amp;q=dotfiles">dotfile repositories</a> you&rsquo;ll see on GitHub.</p>

<p><img class="center" src="/images/blog/gh-dotfiles.png"></p>

<p><code>$HOME</code> as a repository was heavily influenced by <a href="https://github.com/garybernhardt/dotfiles">Gary Bernhardt&rsquo;s dot files</a>. I really liked the simplicity of not having extra scripting to create a bunch of symlinks. Once you have your home directory cloned, you&rsquo;re already quite far down the path of having your machine the way you want it. Because it&rsquo;s a repository, when you delete a file, it goes away and rerunning your setup will not restore that file. It&rsquo;s inherently an idempotent system!</p>

<p>Another feature I like about Gary&rsquo;s setup is that uses <code>~/bin</code> scripts rather than liberal use of aliases in his shell profile. This way you really minimize the configuration of your shell. I personally dislike shell plugin frameworks like <a href="https://github.com/Bash-it/bash-it">bash-it</a> and <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> as I believe they add complexity where it really isn&rsquo;t warranted. Keep things simple and you don&rsquo;t need frameworks to manage stuff.</p>

<p>That being said, not using a framework is accepting the trade-off of not getting the benefit of community updates. I personally like watching the community for inspiration, not for automatically ingesting their updates.</p>

<h2>Awkward OSX Settings</h2>

<p>My previous iteration of this automation was 100% <a href="https://github.com/pivotal-sprout/sprout-wrap">pivotal-sprout</a> based. If you look <a href="https://github.com/scottmuc/osx-homedir/blob/9e9c6bee3e24b481c06ba0cfaffdb0e3b6ac93ff/bin/coalesce_this_machine#L14-L21">closely</a> you will see that this
automation still invokes sprout. I&rsquo;ve gone the route of using it as a collection of OSX configurations. I could maintain some of these as shell scripts, but I feel ok having this additional complexity and added dependency.</p>

<p>The configuration provided by sprout is listed in the <a href="https://github.com/scottmuc/osx-homedir#so-whats-included">Inventory</a>.</p>

<h2>What Could Possibly Go Wrong</h2>

<p>Workstation automation can be extremely flaky and that&rsquo;s due to the nature of it fetching dependencies from all sorts of locations. This drives home the reason for needing to run it frequently. I can pretty much guarantee that the code that worked a month ago will not work today. Packages change name, or download locations change. This can result in a lot of mistrust of the automation.</p>

<p>Having a good routine of wiping your machine and setting up from scratch is a good way to ensure it all still works. I used to be the type that was proud of how long they could keep their workstation running and would do OS upgrades (Windows, OSX, and FreeBSD). Now I feel much more satisfied by destroying and recreating.</p>

<h2>Duplication is OK</h2>

<p>Choosing when to vendor something is an important decision to make around construction your setup. The more you vendor,
the more reproducible your automation will be. The more you vendor, the harder it is to keep up to date with changes.</p>

<p>The <a href="https://github.com/bkuhlmann/osx#os-x-el-capitan">OSX installer</a> steps is something I&rsquo;d be willing to copy and paste into my own repository. Vendoring <code>vim</code> plugins is something I&rsquo;m in favour of doing as well. The principle is that the fewer moving parts there are, the better. Even with what I believe to be a simple workstation setup, there&rsquo;s still many external facing pieces that will cause failure or tricky bugs to appear.</p>

<p>There does not exist one true workstation to rule them all. Neither is there one workstation automation method to rule them all. Your automation is going to be a somewhat handcrafted piece of art, but it&rsquo;s going to be a simple piece
of art (hopefully).</p>

<h2>Replicating This Strategy</h2>

<p>Attempting this kind of automation seems to be best grown and not copied. If you&rsquo;re starting from scratch, the first step is running <code>git init</code> in your <code>$HOME</code> dir, adding 1 precious dot file, and pushing that somewhere off your machine.</p>

<h2>Summary</h2>

<p>In the end, I have a setup I&rsquo;m relatively happy with. It turns out that my implementation looks oddly similar to <a href="https://github.com/gerhard/setup">Gerhard&rsquo;s</a>, a colleague of mine.</p>

<p>This post still took way too long to write making me think that I haven&rsquo;t made it simple enough though. There&rsquo;s still a lot of moving parts and many concepts I didn&rsquo;t dive into at all (e.g.: what about my data).</p>

<hr />


<h2>Appendix</h2>

<ol>
<li><p><span id="existing-tools"><strong>Other Tools and Strategies</strong></span></p>

<ul>
<li><a href="https://github.com/pivotal-sprout/sprout-wrap">Sprout</a> &ndash; Intially this was called <code>pivotal_workstation</code> but transformed into a slightly more
configurable and modular system. It uses <code>chef</code> under the covers and is quite comprehensive.</li>
<li><a href="https://github.com/boxen/boxen">Boxen</a> &ndash; Created by GitHub, this tool uses <code>puppet</code> under the covers.</li>
<li><a href="https://osxc.github.io/">osxc</a> &ndash; Not sure where it was born from, but it uses <code>ansible</code> underneath.</li>
</ul>


<p> All three of these strive for the same thing, but use different engines. It probably makes sense to use whichever one
 uses the Configuration Management tool you&rsquo;re most comfortable with. The problem though, is that these tools may add a
 bit more complexity than is really necessary.</p>

<p> <a href="http://www.ifdown.net/">Sam Gibson</a> wrote a <a href="https://www.thoughtworks.com/p2magazine/issue08/babushka/">great article</a> about this using <a href="https://babushka.me/">Babushka</a>. He believed the
 above styles are too complex and strived to find a simpler solution. I like it, but I felt that it could be
 simplified further.</p>

<p> <a href="https://github.com/gerhard/setup">Gerhard Lazu&rsquo;s</a> workstation setup. He replaced <strong>sprout</strong> with a collection to
 shell scripts that I may be tempted to migrate towards. But one thing at a time; that&rsquo;s an important principle around
 working on this kind of stuff. There are a lot of moving parts and it&rsquo;ll only prove itself out over time.</p>

<p> <a href="http://joeyh.name/svnhome/">Joey Hess</a> has been doing this since 2000 using CVS (then SVN, then git).</p></li>
<li><p><strong>SSH keys</strong></p>

<p> You are probably going to want to update your code. In order to be able to push your changes to GitHub you&rsquo;ll need to
have your keys. For this, I follow Tammer Saleh&rsquo;s excellent post on <a href="http://tammersaleh.com/posts/building-an-encrypted-usb-drive-for-your-ssh-keys-in-os-x/">building an encrypted usb drive for your keys</a>.</p></li>
<li><p><strong>Baseline OS</strong></p>

<p> Technically you cannot start from scratch because you need at least an existing OSX machine to create the installer USB
stick. To do this, I followed the instructions on Brooke Kuhlmann&rsquo;s <a href="https://github.com/bkuhlmann/osx#os-x-el-capitan">workstation automation</a>*
repository.</p>

<p>When following this process, I reformat the machines disk with an encrypted volume and always create my new machine with
a different username (to ensure my automation doesn&rsquo;t make too many assumptions on pathes).</p>

<p>* <em>Similar steps worked just recently for macOS Sierra</em></p></li>
</ol>


<p><strong>For fun, here&rsquo;s the complete output of the latest run:</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~ ? coalesce_this_machine
</span><span class='line'>~/workspace/sprout-wrap ~
</span><span class='line'>Rubygems 2.0.14.1 is not threadsafe, so your gems will be installed one at a time. Upgrade to Rubygems 2.1.0 or higher to enable parallel gem installation.
</span><span class='line'>Using rake 10.5.0
</span><span class='line'>Using awesome_print 1.6.1
</span><span class='line'>Using builder 3.2.2
</span><span class='line'>Using mixlib-config 2.2.1
</span><span class='line'>Using mixlib-shellout 2.2.5
</span><span class='line'>Using libyajl2 1.2.0
</span><span class='line'>Using hashie 2.1.2
</span><span class='line'>Using mixlib-log 1.6.0
</span><span class='line'>Using rack 1.6.4
</span><span class='line'>Using uuidtools 2.1.5
</span><span class='line'>Using diff-lcs 1.2.5
</span><span class='line'>Using erubis 2.7.0
</span><span class='line'>Using highline 1.7.8
</span><span class='line'>Using rspec-support 3.4.1
</span><span class='line'>Using mixlib-cli 1.5.0
</span><span class='line'>Using net-ssh 2.9.2
</span><span class='line'>Using ffi 1.9.10
</span><span class='line'>Using ipaddress 0.8.2
</span><span class='line'>Using systemu 2.6.5
</span><span class='line'>Using wmi-lite 1.0.0
</span><span class='line'>Using plist 3.1.0
</span><span class='line'>Using proxifier 1.0.3
</span><span class='line'>Using coderay 1.1.0
</span><span class='line'>Using method_source 0.8.2
</span><span class='line'>Using slop 3.6.0
</span><span class='line'>Using multi_json 1.11.2
</span><span class='line'>Using net-telnet 0.1.1
</span><span class='line'>Using sfl 2.2
</span><span class='line'>Using syslog-logger 1.6.8
</span><span class='line'>Using mini_portile2 2.0.0
</span><span class='line'>Using rufus-lru 1.0.5
</span><span class='line'>Using polyglot 0.3.5
</span><span class='line'>Using yajl-ruby 1.2.1
</span><span class='line'>Using thor 0.19.1
</span><span class='line'>Using minitar 0.5.4
</span><span class='line'>Using bundler 1.13.2
</span><span class='line'>Using chef-config 12.6.0
</span><span class='line'>Using ffi-yajl 2.2.3
</span><span class='line'>Using rspec-core 3.4.1
</span><span class='line'>Using rspec-expectations 3.4.0
</span><span class='line'>Using rspec-mocks 3.4.1
</span><span class='line'>Using net-ssh-gateway 1.2.0
</span><span class='line'>Using net-scp 1.2.1
</span><span class='line'>Using pry 0.10.3
</span><span class='line'>Using gherkin 2.12.2
</span><span class='line'>Using nokogiri 1.6.7.2
</span><span class='line'>Using treetop 1.6.3
</span><span class='line'>Using librarian 0.1.2
</span><span class='line'>Using chef-zero 4.4.2
</span><span class='line'>Using ohai 8.8.1
</span><span class='line'>Using rspec_junit_formatter 0.2.3
</span><span class='line'>Using rspec-its 1.2.0
</span><span class='line'>Using mixlib-authentication 1.4.0
</span><span class='line'>Using rspec 3.4.0
</span><span class='line'>Using net-ssh-multi 1.2.1
</span><span class='line'>Using specinfra 2.50.3
</span><span class='line'>Using foodcritic 6.0.0
</span><span class='line'>Using serverspec 2.29.1
</span><span class='line'>Using chef 12.6.0
</span><span class='line'>Using librarian-chef 0.0.4
</span><span class='line'>Using soloist 1.0.3
</span><span class='line'>Bundle complete! 3 Gemfile dependencies, 61 gems now installed.
</span><span class='line'>Use `bundle show [gemname]` to see where a bundled gem is installed.
</span><span class='line'>Installing build-essential (2.2.4)
</span><span class='line'>Installing dmg (2.3.0)
</span><span class='line'>Installing homebrew (2.0.5)
</span><span class='line'>Installing osx (0.1.0)
</span><span class='line'>Installing sprout-base (0.3.0)
</span><span class='line'>Installing sprout-osx-settings (0.1.0)
</span><span class='line'>Installing sprout-osx-apps (0.1.0)
</span><span class='line'>Password:
</span><span class='line'>[2016-10-11T22:06:06+01:00] INFO: Forking chef instance to converge...
</span><span class='line'>Starting Chef Client, version 12.6.0
</span><span class='line'>[2016-10-11T22:06:06+01:00] INFO: *** Chef 12.6.0 ***
</span><span class='line'>[2016-10-11T22:06:06+01:00] INFO: Chef-client pid: 14253
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Setting the run_list to ["sprout-base", "sprout-osx-settings::defaults_fast_key_repeat_rate", "sprout-osx-settings::function_keys", "sprout-osx-settings::screensaver", "sprout-osx-settings::set_menubar_clock_format", "sprout-osx-settings::dock_preferences"] from CLI options
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Run List is [recipe[sprout-base], recipe[sprout-osx-settings::defaults_fast_key_repeat_rate], recipe[sprout-osx-settings::function_keys], recipe[sprout-osx-settings::screensaver], recipe[sprout-osx-settings::set_menubar_clock_format], recipe[sprout-osx-settings::dock_preferences]]
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Run List expands to [sprout-base, sprout-osx-settings::defaults_fast_key_repeat_rate, sprout-osx-settings::function_keys, sprout-osx-settings::screensaver, sprout-osx-settings::set_menubar_clock_format, sprout-osx-settings::dock_preferences]
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Starting Chef Run for Meriadocs-MacBook-Air.local
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Running start handlers
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Start handlers complete.
</span><span class='line'>Compiling Cookbooks...
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: /Users/merry
</span><span class='line'>[2016-10-11T22:06:20+01:00] WARN: Cloning resource attributes for osx_defaults[adjusts dock size to ] from prior resource (CHEF-3694)
</span><span class='line'>[2016-10-11T22:06:20+01:00] WARN: Previous osx_defaults[adjusts dock size to ]: /Users/merry/workspace/sprout-wrap/cookbooks/sprout-osx-settings/recipes/dock_preferences.rb:24:in `from_file'
</span><span class='line'>[2016-10-11T22:06:20+01:00] WARN: Current  osx_defaults[adjusts dock size to ]: /Users/merry/workspace/sprout-wrap/cookbooks/sprout-osx-settings/recipes/dock_preferences.rb:31:in `from_file'
</span><span class='line'>Converging 17 resources
</span><span class='line'>Recipe: sprout-base::var_chef_cache
</span><span class='line'>  * directory[/var/chef/cache] action create[2016-10-11T22:06:20+01:00] INFO: Processing directory[/var/chef/cache] action create (sprout-base::var_chef_cache line 3)
</span><span class='line'> (up to date)
</span><span class='line'>Recipe: sprout-osx-settings::defaults_fast_key_repeat_rate
</span><span class='line'>  * osx_defaults[set key repeat rate] action write[2016-10-11T22:06:20+01:00] INFO: Processing osx_defaults[set key repeat rate] action write (sprout-osx-settings::defaults_fast_key_repeat_rate line 1)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[set key repeat rate - /Users/merry/Library/Preferences/.GlobalPreferences - KeyRepeat] action run[2016-10-11T22:06:20+01:00] INFO: Processing execute[set key repeat rate - /Users/merry/Library/Preferences/.GlobalPreferences - KeyRepeat] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>1
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: execute[Guard resource] ran successfully
</span><span class='line'> (skipped due to not_if)
</span><span class='line'>  * osx_defaults[set initial key repeat delay] action write[2016-10-11T22:06:20+01:00] INFO: Processing osx_defaults[set initial key repeat delay] action write (sprout-osx-settings::defaults_fast_key_repeat_rate line 8)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[set initial key repeat delay - /Users/merry/Library/Preferences/.GlobalPreferences - InitialKeyRepeat] action run[2016-10-11T22:06:20+01:00] INFO: Processing execute[set initial key repeat delay - /Users/merry/Library/Preferences/.GlobalPreferences - InitialKeyRepeat] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>15
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: execute[Guard resource] ran successfully
</span><span class='line'> (skipped due to not_if)
</span><span class='line'>Recipe: sprout-osx-settings::function_keys
</span><span class='line'>  * osx_defaults[Turn on function-keys-work-as-function keys] action write[2016-10-11T22:06:20+01:00] INFO: Processing osx_defaults[Turn on function-keys-work-as-function keys] action write (sprout-osx-settings::function_keys line 5)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[Turn on function-keys-work-as-function keys - /Users/merry/Library/Preferences/.GlobalPreferences - com.apple.keyboard.fnState] action run[2016-10-11T22:06:20+01:00] INFO: Processing execute[Turn on function-keys-work-as-function keys - /Users/merry/Library/Preferences/.GlobalPreferences - com.apple.keyboard.fnState] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>[2016-10-11T22:06:20+01:00] INFO: execute[Turn on function-keys-work-as-function keys - /Users/merry/Library/Preferences/.GlobalPreferences - com.apple.keyboard.fnState] ran successfully
</span><span class='line'>
</span><span class='line'>    - execute defaults write /Users/merry/Library/Preferences/.GlobalPreferences com.apple.keyboard.fnState -boolean true
</span><span class='line'>  * ruby_block[Fix Function Keys] action run[2016-10-11T22:06:20+01:00] INFO: Processing ruby_block[Fix Function Keys] action run (sprout-osx-settings::function_keys line 13)
</span><span class='line'>merry             275   0.0  0.5  2611920  40944   ??  S    Sat06pm   7:11.60 /System/Library/CoreServices/SystemUIServer.app/Contents/MacOS/SystemUIServer
</span><span class='line'>157:242: execution error: access for assistive devices is NOT enabled! (This is not an error, just a warning) (-2700)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: ruby_block[Fix Function Keys] called
</span><span class='line'>
</span><span class='line'>    - execute the ruby block Fix Function Keys
</span><span class='line'>Recipe: sprout-osx-settings::screensaver
</span><span class='line'>  * osx_defaults[ask for password when screen is locked] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[ask for password when screen is locked] action write (sprout-osx-settings::screensaver line 1)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[ask for password when screen is locked - com.apple.screensaver - askForPassword] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[ask for password when screen is locked - com.apple.screensaver - askForPassword] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>1
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[Guard resource] ran successfully
</span><span class='line'> (skipped due to not_if)
</span><span class='line'>  * osx_defaults[wait 60 seconds between screensaver & lock] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[wait 60 seconds between screensaver & lock] action write (sprout-osx-settings::screensaver line 7)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[wait 60 seconds between screensaver & lock - com.apple.screensaver - askForPasswordDelay] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[wait 60 seconds between screensaver & lock - com.apple.screensaver - askForPasswordDelay] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[wait 60 seconds between screensaver & lock - com.apple.screensaver - askForPasswordDelay] ran successfully
</span><span class='line'>
</span><span class='line'>    - execute defaults write com.apple.screensaver askForPasswordDelay -float 60.0
</span><span class='line'>  * osx_defaults[set screensaver timeout] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[set screensaver timeout] action write (sprout-osx-settings::screensaver line 19)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[set screensaver timeout - ByHost/com.apple.screensaver.E30179FA-16E3-5588-9F5E-127D843E0F27 - idleTime] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[set screensaver timeout - ByHost/com.apple.screensaver.E30179FA-16E3-5588-9F5E-127D843E0F27 - idleTime] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>600
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[Guard resource] ran successfully
</span><span class='line'> (skipped due to not_if)
</span><span class='line'>  * execute[set display, disk and computer sleep times] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[set display, disk and computer sleep times] action run (sprout-osx-settings::screensaver line 26)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[set display, disk and computer sleep times] ran successfully
</span><span class='line'>
</span><span class='line'>    - execute pmset -a displaysleep 20 disksleep 15 sleep 0
</span><span class='line'>Recipe: sprout-osx-settings::set_menubar_clock_format
</span><span class='line'>  * osx_defaults[turn on date & seconds for menubar clock] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[turn on date & seconds for menubar clock] action write (sprout-osx-settings::set_menubar_clock_format line 2)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[turn on date & seconds for menubar clock - com.apple.menuextra.clock - DateFormat] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[turn on date & seconds for menubar clock - com.apple.menuextra.clock - DateFormat] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>MMM d  HH:mm:ss
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[Guard resource] ran successfully
</span><span class='line'> (skipped due to not_if)
</span><span class='line'>Recipe: sprout-osx-settings::dock_preferences
</span><span class='line'>  * osx_defaults[set dock to be on left] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[set dock to be on left] action write (sprout-osx-settings::dock_preferences line 3)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[set dock to be on left - com.apple.dock - orientation] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[set dock to be on left - com.apple.dock - orientation] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>left
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[Guard resource] ran successfully
</span><span class='line'> (skipped due to not_if)
</span><span class='line'>  * osx_defaults[set dock autohide to ] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[set dock autohide to ] action write (sprout-osx-settings::dock_preferences line 10)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[set dock autohide to  - com.apple.dock - autohide] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[set dock autohide to  - com.apple.dock - autohide] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[set dock autohide to  - com.apple.dock - autohide] ran successfully
</span><span class='line'>
</span><span class='line'>    - execute defaults write com.apple.dock autohide -boolean true
</span><span class='line'>  * osx_defaults[remove persistent apps from the dock] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[remove persistent apps from the dock] action write (sprout-osx-settings::dock_preferences line 17)
</span><span class='line'> (up to date)
</span><span class='line'>  * execute[remove persistent apps from the dock - com.apple.dock - persistent-apps] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[remove persistent apps from the dock - com.apple.dock - persistent-apps] action run (/Users/merry/workspace/sprout-wrap/cookbooks/osx/providers/defaults.rb line 4)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Processing execute[Guard resource] action run (dynamically defined)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[remove persistent apps from the dock - com.apple.dock - persistent-apps] ran successfully
</span><span class='line'>
</span><span class='line'>    - execute defaults write com.apple.dock persistent-apps -array
</span><span class='line'>  * osx_defaults[adjusts dock size to ] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[adjusts dock size to ] action write (sprout-osx-settings::dock_preferences line 24)
</span><span class='line'> (skipped due to only_if)
</span><span class='line'>  * osx_defaults[adjusts dock size to ] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[adjusts dock size to ] action write (sprout-osx-settings::dock_preferences line 31)
</span><span class='line'> (skipped due to only_if)
</span><span class='line'>  * osx_defaults[toggle dock magnification on/off] action write[2016-10-11T22:06:21+01:00] INFO: Processing osx_defaults[toggle dock magnification on/off] action write (sprout-osx-settings::dock_preferences line 38)
</span><span class='line'> (skipped due to not_if)
</span><span class='line'>  * execute[relaunch dock] action run[2016-10-11T22:06:21+01:00] INFO: Processing execute[relaunch dock] action run (sprout-osx-settings::dock_preferences line 45)
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: execute[relaunch dock] ran successfully
</span><span class='line'>
</span><span class='line'>    - execute killall Dock
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Chef Run complete in 1.275448 seconds
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Skipping removal of unused files from the cache
</span><span class='line'>
</span><span class='line'>Running handlers:
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Running report handlers
</span><span class='line'>Running handlers complete
</span><span class='line'>[2016-10-11T22:06:21+01:00] INFO: Report handlers complete
</span><span class='line'>Chef Client finished, 7/27 resources updated in 15 seconds
</span><span class='line'>~
</span><span class='line'>Already up-to-date.
</span><span class='line'>Succeeded in installing golang
</span><span class='line'>Succeeded in installing jq
</span><span class='line'>Succeeded in installing mp3blaster
</span><span class='line'>Succeeded in installing pstree
</span><span class='line'>Succeeded in installing tree
</span><span class='line'>Succeeded in installing 1password
</span><span class='line'>Succeeded in installing dropbox
</span><span class='line'>Succeeded in installing evernote
</span><span class='line'>Succeeded in installing flycut
</span><span class='line'>Succeeded in installing google-chrome
</span><span class='line'>Succeeded in installing iterm2
</span><span class='line'>Succeeded in installing selfcontrol
</span><span class='line'>Succeeded in installing shiftit
</span><span class='line'>Succeeded in installing skype
</span><span class='line'>Succeeded in installing tunnelbear
</span><span class='line'>Succeeded in installing vagrant
</span><span class='line'>Succeeded in installing vlc
</span><span class='line'>Succeeded in installing virtualbox
</span><span class='line'>
</span><span class='line'>Success: 18 Fail: 0
</span><span class='line'>Last software update was 3 days ago
</span><span class='line'>Since softwareupdate ran recently, not going to do anything
</span><span class='line'>remove /Users/merry/.softwareupdate_indicator to force an update</span></code></pre></td></tr></table></div></figure>


<p><em>This post took 12 pomodoros to complete (more time than it takes to setup a laptop from scratch)</em></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Scott Muc</span></span>

      








  


<time datetime="2017-01-11T14:45:48+00:00" pubdate data-updated="true">Jan 11<span>th</span>, 2017</time>
      


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/my-resolutions-for-2017/" title="Previous Post: My Resolutions for 2017">&laquo; My Resolutions for 2017</a>
      
      
        <a class="basic-alignment right" href="/irish-whiskey-appreciation/" title="Next Post: Irish Whiskey Appreciation">Irish Whiskey Appreciation &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2023 - Scott Muc -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'scottmuc-dot-com';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://scottmuc.com/osx-workstation-setup-automation/';
        var disqus_url = 'http://scottmuc.com/osx-workstation-setup-automation/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>












</body>
</html>
